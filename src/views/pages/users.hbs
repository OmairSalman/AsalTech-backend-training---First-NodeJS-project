<div class="container py-4">
  <h1 class="mb-4 fw-bold">All Users</h1>
  <ul class="list-group user-list">
    {{#each users}}
      <li class="list-group-item d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center user-info">
          <img src="{{this.avatarURL}}" alt="{{this.name}}'s avatar" class="user-avatar me-3" style="width:40px; height:40px; border-radius:50%; object-fit:cover;">
          <div>
            <span class="fw-semibold">{{this.name}}</span>
            <span class="text-muted ms-2 small">{{this.email}}</span>
            {{#if this.isAdmin}}
              <span class="badge bg-warning text-dark ms-2">Admin</span>
            {{/if}}
          </div>
        </div>
        <div class="d-flex user-actions gap-2">
          <div class="d-flex flex-row">
            <a href="/profile/{{this._id}}" class="btn btn-sm btn-outline-primary">View Profile</a>
            <a href="/admin/edit/{{this._id}}" class="btn btn-sm btn-outline-secondary">Edit</a>
          </div>
          {{#unless (isOwner ../currentUser._id this._id)}}
            <div class="d-flex flex-column flex-sm-row gap-2">
              {{#if this.isAdmin}}
                <button class="btn btn-sm btn-warning toggle-admin-btn admin-toggle-btn-wide" data-userid="{{this._id}}">Remove Admin</button>
              {{else}}
                <button class="btn btn-sm btn-success toggle-admin-btn admin-toggle-btn-wide" data-userid="{{this._id}}">Make Admin</button>
              {{/if}}
              <button class="btn btn-sm btn-danger delete-user-btn" data-userid="{{this._id}}">Delete</button>
            </div>
          {{/unless}}
        </div>
      </li>
    {{/each}}
  </ul>
</div>

<script src="/js/admin-users.js"></script>